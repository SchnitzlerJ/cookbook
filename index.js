var g_Recipes = [
	{
		"name": "Hefeteig (süß)",
		"persons": undefined,
		"ingredients": [
			{ "amount": "500 g", "name": "Mehl" },
			{ "amount": "250 ml", "name": "Milch"},
			{ "amount": "20 g", "name": "Hefe" },
			{ "amount": "60-80 g", "name": "Zucker" },
			{ "amount": "80-100 g", "name": "Butter" },
			{ "amount": "1-2", "name": "Eier"}
		],
		"steps": [
			"$1, $3 und $4 mischen und erwärmen.",
			"$0 in Schüssel geben und eine Kuhle formen.",
			"Die Mischung aus $1, $3 und $4 zusammen mit $2 in die Kuhle geben und vermischen.",
			"Gehen lassen bis sich Bläschen bilden.",
			"$5 hinzugeben, gut durchkneten und auf doppelte Höhe gehen lassen.",
		],
		"inspiration": "Kochen und Backen nach Grundrezepten (Luise Haarer)",
	},
	{
		"name": "Kartoffelcremesuppe",
		"persons": [3,4],
		"ingredients": [
			{ "amount": "800 g", "name": "Kartoffeln" },
			{ "amount": "2 EL", "name": "Olivenöl" },
			{ "amount": "2 Zehen", "name": "Knoblauch" },
			{ "amount": "1000 ml", "name": "leichte Gemüsebrühe" },
			{ "amount": "150 g", "name": "Crème fraîche" },
			{ "amount": "", "name": "Zitronensaft" },
		],
		"steps": [
			"$0 schälen und würfeln.",
			"$2 fein hacken und zusammen mit $0 in $1 andünsten.",
			"$3 dazugießen und aufkochen. Ca. 10 Minuten köcheln bis die Kartoffeln gar sind.",
			"Die gegarte Suppe fein pürieren, $4 unterschlagen.",
			"Mit $5 und Salz und Pfeffer abschmecken."
		],
		"inspiration": "TODO",
	},
	{
		"name": "Linsen mit Spätzle",
		"persons": 4,
		"ingredients": [
			{ "amount": "620 g", "name": "Mehl" },
			{ "amount": "6", "name": "Eier" },
			{ "amount": "2 kleine Gläser", "name": "Linsen" },
			{ "amount": "5 kleine Gläser", "name": "Wasser" },
			{ "amount": "1", "name": "große Zwiebel" },
			{ "amount": "2", "name": "Karotten" },
			{ "amount": "2.4 TL", "name": "Salz" },
			{ "amount": "3", "name": "Lorbeerblätter"},
		],
		"steps": [
			"$4 und $5 klein würfeln und mit Butter andünsten.",
			"$2, $3 und $7 hinzugeben und Deckel schließen. Kochen.",
			"$0, $6 und $1 zu einem Teig schlagen.",
			"Spätzle machen.",
			"Linsen mit Essig, Salz und Pfeffer abschmecken.",
		],
		"inspiration": null,
	},
	{
		"name": "Chili sin carne (Sojahack)",
		"persons": 3,
		"ingredients": [
			{ "amount": "800 g", "name": "Dosentomaten" },
			{ "amount": "800 g", "name": "Kidneybohnen" },
			{ "amount": "70 g", "name": "Sojagranulat" },
			{ "amount": "340 ml", "name": "Wasser (kochend)" },
			{ "amount": "", "name": "Gemüsebrühe" },
			{ "amount": "1 Zehe", "name": "Knoblauch" },
			{ "amount": "1", "name": "Zwiebel" },
			{ "amount": "3", "name": "Paprika" },
			{ "amount": "", "name": "Chilis" },
			{ "amount": "", "name": "Kreuzkümmel"},
			{ "amount": "", "name": "Schokolade (74%)"},
			{ "amount": "", "name": "Kakaopulver"},
			{ "amount": "", "name": "Paprikapulver"},
			{ "amount": "", "name": "Zimt"},
			{ "amount": "", "name": "Oregano"},
			{ "amount": "", "name": "Salz"},
			{ "amount": "", "name": "Pfeffer"},
		],
		"steps": [
			"$2 in $3 mit etwas $4 einweichen.",
			"$7 und $6 würfeln.",
			"$2 abtropfen lassen.",
			"$7 und $6 im Topf scharf anbraten.",
			"$2 hinzugeben, braten und mit Pfeffer und Salz würzen.",
			"$0, $1, $8 hinzugeben und köcheln lassen.",
			"$5 pressen und dazugeben, köcheln lassen und mit $9, $10, $11, $12, $13, $14, $15 und $16 abschmecken."
		],
		"inspiration": null,
	},
	{
		"name": "Kartoffelsalat",
		"persons": undefined,
		"ingredients": [
			{ "amount": "800 g", "name": "Salatkartoffeln" },
			{ "amount": "250 ml", "name": "Gemüsebrühe" },
			{ "amount": "5 EL", "name": "Essig" },
			{ "amount": "1.5 TL", "name": "Senf" },
			{ "amount": "2", "name": "Zwiebeln"},
			{ "amount": "3", "name": "Öl"},
		],
		"steps": [
			"$0 waschen, gar dämpfen und mit kaltem Wasser abschrecken.",
			"$4 fein würfeln und mit $1, $2 und $3 aufkochen.",
			"Warme Kartoffeln schälen und in dünne Scheiben schneiden,",
			"Brühe über die Kartoffeln geben, vorsichtig unterheben und ziehen lassen.",
			"$5 unterheben.",
			"Nach 30 Minuten mit Essig, Öl und Pfeffer abschmecken.",
		],
		"inspiration": "OptimusShepard",
	},
	{
		"name": "Brownies",
		"persons": "Blech 24 cm × 24 cm",
		"ingredients": [
			{ "amount": "130 g", "name": "Butter" },
			{ "amount": "270 g", "name": "Zartbitterschokolade" },
			{ "amount": "50 g", "name": "Muscovadozucker" },
			{ "amount": "90 g", "name": "Zucker" },
			{ "amount": "60 g", "name": "Mehl" },
			{ "amount": "40 g", "name": "Kakao" },
			{ "amount": "3", "name": "Eier" },
			{ "amount": "0.75 TL", "name": "Backpulver" },
		],
		"steps": [
			"$1 mit $0 schmelzen.",
			"$2 und $3 darunterschlagen und abkühlen lassen.",
			"Backofen auf 175 °C Ober-/Unterhitze vorwärmen und Backform einfetten.",
			"In weiterer Schüssel $4 mit $5 und $7 mischen.",
			"$6 in Schokolade-Butter-Zucker-Mischung rühren und kurz schaumig schlagen.",
			"Mehl-Kakao-Mischung unterheben, bis gerade so ein Teig entsteht. Nicht länger!",
			"In Backform verteilen und 15–22 Minuten im Ofen backen. Die Brownies sind fertig, wenn beim reinstechen nur wenig kleben bleibt und es sich beim Wackeln am Blech relativ fest verhält.",
			"Mindestens 6 Stunden kühl stellen.",
		],
		"inspiration": null,
	},
	{
		"name": "Bisquitrolle",
		"persons": "1 Blech",
		"ingredients": [
			{ "amount": "150 g", "name": "Mehl" },
			{ "amount": "150 g", "name": "Zucker" },
			{ "amount": "3", "name": "Eier" },
			{ "amount": "3 EL", "name": "warmes Wasser" },
			{ "amount": "3 TL", "name": "Backpulver" },
			{ "amount": "300 g", "name": "Sahne" },
			{ "amount": "220 g", "name": "Himbeeren" },
			{ "amount": "", "name": "Puderzucker" },
		],
		"steps": [
			"$2 trennen. Eiklar steif schlagen, danach die Hälfte des $1s einrieseln lassen.",
			"Eigelb in anderer Schüssel cremig schlagen.",
			"$3 hinzufügen, danach Rest des $1s unterschlagen.",
			"Eischnee darübergeben. $0 mit $4 mischen und auch in die Schüssel geben. Danach vorsichtig durchmischen.",
			"Masse in ein mit gefettetem Backpapier ausgelegtem Blech geben, glatt streichen und 12–13 Minuten bei 190–210 °C ohne Umluft backen bis der Teig anfängt leicht hellbraun zu werden.",
			"Sauberes Tuch auslegen und mit Zucker bestreuen.",
			"Sobald der Bisquit aus dem Ofen ist, auf das Tuch stürzen, Backpapier abziehen und den Bisquit zusammen mit dem Tuch aufrollen.",
			"Sobald die Rolle abgekühlt ist, entrollen, mit geschlagener $5 und $6 füllen, zusammenrollen und mit $7 bestreuen.",
		],
		"inspiration": "Kochen und Backen nach Grundrezepten (Luise Haarer)",
	},
	{
		"name": "Shakshuka",
		"persons": [2,3],
		"ingredients": [
			{ "amount": "3 TL", "name": "Olivenöl" },
			{ "amount": "1", "name": "Zwiebel" },
			{ "amount": "2", "name": "Paprika" },
			{ "amount": "1", "name": "Chili" },
			{ "amount": "2-3", "name": "Knoblauchzehen" },
			{ "amount": "3 TL", "name": "Paprikapulver" },
			{ "amount": "2 TL", "name": "Kreuzkümmel" },
			{ "amount": "1 TL", "name": "Oregano" },
			{ "amount": "800 g", "name": "ganze Dosentomaten" },
			{ "amount": "", "name": "Salz" },
			{ "amount": "", "name": "Pfeffer" },
			{ "amount": "", "name": "Petersilie" },
			{ "amount": "3-6", "name": "Eier" },
			{ "amount": "", "name": "Couscous" },
		],
		"steps": [
			"$2 und $1 in dünne Scheiben schneiden, $3 fein würfeln.",
			"$0 bei großer Hitze in Pfanne erwärmen.",
			"Erst $2, danach $1 und $3 in die Pfanne geben. Nicht umrühren.",
			"Braten lassen bis das Gemüse dunkelbraune Stellen aufweist. Umrühren und wiederholen.",
			"$4 fein schneiden, hinzugeben und unter Rühren braten bis sie duften.",
			"$5 und $6 hinzugeben und unter Rühren braten bis sie duften.",
			"$8 hinzugeben, Hitze reduzieren und 10 Minuten leicht köcheln lassen. Dabei die Tomaten mit dem Löffel zerdrücken.",
			"Mit $7 und $9 abschmecken und Hälfte der $11 unterrühren.",
			"Mit dem Löffel eine Vertiefung in die Sauce drücken und eines der $12 hineinschlagen. Leicht salzen und mit Sauce bedecken. Für die restlichen $12 wiederholen.",
			"Pfanne mit Deckel bedecken und für 5–8 Minuten auf geringe Stufe stellen bis das Eiklar fest, das Eigelb jedoch noch flüssig ist.",
			"Wasser zum Kochen bringen und über den $13 geben.",
			"Zum Servieren die restliche $11 über die Sauce geben.",
		],
		"inspiration": "https://www.seriouseats.com/shakshuka-north-african-shirred-eggs-tomato-pepper-recipe",
	},
	{
		"name": "Bratreis mit Ei",
		"persons": 1,
		"ingredients": [
			{ "amount": "", "name": "gekochter Reis" },
			{ "amount": "2", "name": "Eier" },
			{ "amount": "2", "name": "Knoblauchzehen" },
			{ "amount": "1", "name": "Zwiebeln" },
			{ "amount": "1 Bund", "name": "Frühlingszwiebeln" },
			{ "amount": "", "name": "Chilipulver" },
			{ "amount": "", "name": "Sojasoße" },
			{ "amount": "", "name": "Sesamöl" },
			{ "amount": "110 g", "name": "gefrorene Erbsen" },
			{ "amount": "", "name": "Salz" },
		],
		"steps": [
			"$2 und $3 würfeln.",
			"$4 in Ringe schneiden.",
			"$1 mit etwas $6 grob verquirlen.",
			"Öl in Pfanne erhitzen.",
			"Gewürfelte $2 und $3 unter stetigem Rühren scharf anbraten.",
			"Danach $4 ebenso in die Pfanne geben.",
			"Wenn die Zwiebeln gar sind, $8 hinzugeben.",
			"Sobald die Erbsen gar sind, $1 unter Rühren dazugeben.",
			"Wenn die $1 zu stocken beginnen, $0 hinzugeben und weiter braten.",
			"Mit $6, $5, $9 und zuletzt etwas $7 abschmecken.",
		],
		"inspiration": null,
	},
	{
		"name": "Heidelbeerkuchen",
		"persons": "1 kleines Blech",
		"ingredients": [
			{ "amount": "180 g", "name": "Butter" },
			{ "amount": "200 g", "name": "Zucker" },
			{ "amount": "250 g", "name": "Mehl" },
			{ "amount": "1 Pck", "name": "Backpulver" },
			{ "amount": "4", "name": "Eier" },
			{ "amount": "250 g", "name": "Heidelbeeren" },
			{ "amount": "125 g", "name": "Joghurt" },
			{ "amount": "100 g", "name": "Sauerrahm" },
		],
		"steps": [
			"Warme $0 mit $1 verrühren.",
			"$4 unterschlagen.",
			"$2 und $3 mischen und zur Masse geben.",
			"$6 und $7 dazugeben und gut verrühren.",
			"$5 in etwas Mehl wenden und in den Teig geben.",
			"In vorgeheiztem Ofen bei 170 °C für 40–60 Minuten backen.",
		],
		"inspiration": "https://www.chefkoch.de/rezepte/1444801249404467/Blitz-Heidelbeerkuchen.html",
	},
	{
		"name": "Tofu Stroganoff",
		"persons": "2",
		"ingredients": [
			{ "amount": "250 g", "name": "Champignons" },
			{ "amount": "2", "name": "Paprika" },
			{ "amount": "250 g", "name": "Tofu" },
			{ "amount": "2", "name": "Zwiebeln" },
			{ "amount": "200 g", "name": "saure Sahne" },
			{ "amount": "160 g (Abtropfg.)", "name": "Essiggurken" },
		],
		"steps": [
			"$0, $1 und $2 würfeln und in der Pfanne anbraten.",
			"$3 würfeln, dazugeben und anbraten.",
			"$5 würfeln. $5 und $4 dazugeben.",
			"Köcheln lassen.",
			"Mit Salz und Pfeffer abschmecken, ggf. Konsistenz mit etwas Wasser anpassen.",
		],
		"inspiration": null,
	},
	{
		"name": "Crème Brûlée",
		"persons": "4 Förmchen",
		"ingredients": [
			{ "amount": "400 ml", "name": "Sahne" },
			{ "amount": "140 ml", "name": "Milch" },
			{ "amount": "80 g", "name": "Zucker" },
			{ "amount": "5", "name": "Eigelb" },
			{ "amount": "1", "name": "Vanilleschote" },
			{ "amount": "", "name": "Zucker (weiß)" },
		],
		"steps": [
			"$0, $1 und $3 verquirlen.",
			"Mark aus $4 kratzen.",
			"Mark der $4 zusammen mit dem $2 mit dem Rest vermischen.",
			"Mindestens 30 Minuten ziehen lassen.",
			"Ofen vorheizen und Wasser kochen.",
			"Crème-Brûlée-Masse in Förmchen füllen.",
			"Fettpfanne (tiefes Blech) in den Ofen stellen, mit kochendem Wasser füllen und die Förmchen reinstellen.",
			"Für 55 Minuten bei 150 °C ohne Umluft stocken lassen.",
			"Förmchen auskühlen lassen und danach für mindestens 2 Stunden im Kühlschrank kaltstellen.",
			"Vor dem Servieren 1 EL $5 auf jedes Förmchen geben und flambieren.",
		],
		"inspiration": "https://www.chefkoch.de/rezepte/279041105901002/Creme-brulee.html",
	},
	{
		"name": "Spinatrisotto (Spanakoryzo)",
		"persons": 3,
		"ingredients": [
			{ "amount": "1", "name": "Zwiebel" },
			{ "amount": "4 EL", "name": "Olivenöl" },
			{ "amount": "1 Zehe", "name": "Knoblauch" },
			{ "amount": "2 TL", "name": "Tomatenmark" },
			{ "amount": "", "name": "Salz" },
			{ "amount": "", "name": "Pfeffer" },
			{ "amount": "350 g", "name": "Risottoreis" },
			{ "amount": "400 g", "name": "Dosentomaten" },
			{ "amount": "700-800 g", "name": "Wasser" },
			{ "amount": "150 g", "name": "Lauch" },
			{ "amount": "600 g", "name": "Spinat" },
			{ "amount": "0.25 Bund", "name": "Dill" },
			{ "amount": "2", "name": "Frühlingszwiebeln" },
			{ "amount": "1", "name": "Zitrone" },
			{ "amount": "200 g", "name": "Feta" },
			{ "amount": "", "name": "Oregano" },
			{ "amount": "", "name": "Olivenöl" },
		],
		"steps": [
			"$0 und $2 fein schneiden.",
			"$9 fein schneiden.",
			"$10 in Streifen schneiden.",
			"$12 schneiden und $11 fein hacken.",
			"Hälfte des $1 im Topf erhitzen, danach $0 und $2 darin anbraten.",
			"$9 hinzugeben.",
			"$3, $4 und $5 hinzufügen und anbraten.",
			"$6 hinzugeben und andünsten bis glasig.",
			"$7 und $8 hinzugeben und verrühren.",
			"$10, Hälfte des $11 und weißen Teil der $12 hinzugeben.",
			"20–25 Minuten köcheln lassen.",
			"Schale der $13 abreiben und danach die $13 auspressen.",
			"Rest des $11, grünen Teil der $12, andere Hälfte des $1 zusammen mit Zitronenschale und -saft dazugeben und unterrühren.",
			"$14 mit $15 und $16 marinieren und mit dem Risotto servieren.",
		],
		"inspiration": "https://akispetretzikis.com/en/recipe/6150/spanakoryzo-kokkinisto",
	},
	{
		"name": "Mousse au Chocolate",
		"persons": [1.67,2],
		"ingredients": [
			{ "amount": "1", "name": "Ei" },
			{ "amount": "200 mL", "name": "Sahne" },
			{ "amount": "100 g", "name": "Zartbitterschokolade" },
			{ "amount": "50 g", "name": "Vollmilchschokolade" },
		],
		"steps": [
			"$2 und $3 im Wasserbad schmelzen. Die Schokolade sollte warm, aber nicht zu heiß sein.",
			"$0 in eine Schüssel aufschlagen und leicht schaumig schlagen.",
			"$1 in einer weiteren Schüssel steif schlagen.",
			"Die geschmolzene Schokolade mit dünnem Strahl in die Eier einrühren. (Die Schokolade sollte nicht zu kalt sein.)",
			"Die Ei-Schokoladen-Mischung sorgfältig in die Sahne unterheben.",
		],
		"inspiration": "",
	},
	{
		"name": "Zitronenkuchen",
		"persons": undefined,
		"ingredients": [
			{ "amount": "275 g", "name": "Mehl" },
			{ "amount": "1 Pck", "name": "Backpulver" },
			{ "amount": "200 g", "name": "Zucker" },
			{ "amount": "3", "name": "Eier" },
			{ "amount": "125 ml", "name": "Öl" },
			{ "amount": "125 ml", "name": "Milch" },
			{ "amount": "2", "name": "Zitronen" },
			{ "amount": "", "name": "Puderzucker" },
		],
		"steps": [
			"$3 trennen.",
			"Eigelb und $2 verrühren.",
			"$4 und $5 dazugeben.",
			"Die Schale der $6 abreiben und den Saft auspressen.",
			"Schale und Hälfte des Safts der Zitrone dazugeben und alles verrühren.",
			"Zuletzt das Eiweiß dazugeben und verrühren.",
			"$0 mit $1 vermischen, danach nach und nach in den Teig unterrühren.",
			"Kuchenform mit Backpapier auslegen oder Öl bestreichen und Teig einfüllen.",
			"Kuchen bei 180 °C ohne Umluft 30–50 Minuten backen.",
			"Rest des Zitronensafts mit $7 vermischen.",
			"In den noch warmen Kuchen mit einem Zahnstocher Löcher stechen und den Kuchen mit der Zitronenglasur bestreichen.",
		],
		"inspiration": "AX",
	},
	{
		"name": "Thaicurry",
		"persons": 3,
		"ingredients": [
			{ "amount": "3", "name": "Paprika" },
			{ "amount": "1", "name": "Karotten" },
			{ "amount": "1", "name": "Süßkartoffel" },
			{ "amount": "", "name": "grüne Currypaste" },
			{ "amount": "270 ml", "name": "Kokosmilch" },
			{ "amount": "1", "name": "Zwiebel" },
			{ "amount": "1 Bund", "name": "Frühlingszwiebeln" },
			{ "amount": "1", "name": "Mango" },
			{ "amount": "180 g", "name": "Tomaten" },
			{ "amount": "1 Stängel", "name": "Zitronengras" },
			{ "amount": "1 Zehe", "name": "Knoblauch" },
			{ "amount": "420 g", "name": "Reis" },
			{ "amount": "720 g", "name": "Wasser" },
			{ "amount": "", "name": "Limettensaft" },
		],
		"steps": [
			"$1, $2 und $5 schälen, würfeln und anbraten.",
			"$0 würfeln und mitbraten.",
			"$7 schälen, würfeln und dazugeben.",
			"$8 würfeln und dazugeben.",
			"$3 dazugeben.",
			"$11 mit $12 und etwas Salz aufkochen und leise köcheln lassen.",
			"$4 dazugeben und die ggf. etwas Wasser dazugeben.",
			"$9 kleinschneiden und dazugeben.",
			"$10 pressen und dazugeben",
			"Das Curry köcheln lassen.",
			"Zum Schluss $6 kleinschneiden und kurz mitkochen.",
			"Mit $13 und Salz abschmecken."
		],
		"inspiration": "",
	},
	{
		"name": "Thailändische Wokpfanne",
		"persons": 2,
		"ingredients": [
			{ "amount": "300-400 g", "name": "Tofu" },
			{ "amount": "400 g", "name": "Kokosmilch" },
			{ "amount": "200 g", "name": "Austernpilze" },
			{ "amount": "200 g", "name": "grüne Bohnen" },
			{ "amount": "2", "name": "Karotten" },
			{ "amount": "280 g", "name": "Reis" },
			{ "amount": "480 g", "name": "Wasser" },
			{ "amount": "", "name": "Sambal Oelek" },
			{ "amount": "", "name": "Sojasoße" },
			{ "amount": "", "name": "grüne Currypaste" },
		],
		"steps": [
			"$0 würfeln und mit $7 und $8 marinieren.",
			"$3 waschen und in mundgerechte Stücke schneiden.",
			"$2 in Stücke schneiden.",
			"$4 schälen und in ca. 2–3 mm dicke Scheiben schneiden.",
			"Öl in der Pfanne erhitzen.",
			"$2 und $3 anbraten.",
			"$4 dazugeben.",
			"Weiter anbraten, bis das Gemüse bissfest ist.",
			"$5 mit $6 und etwas Salz aufkochen, danach bei kleiner Hitze ziehen lassen.",
			"Mariniertes $0 und $9 in die Pfanne geben.",
			"Kurze Zeit später mit $1 ablöschen",
			"Mit Salz, Pfeffer und $8 abschmecken und noch kurz weiter erhitzen.",
		],
		"inspiration": "https://www.chefkoch.de/rezepte/61751022414158/Thailaendische-Wokpfanne-mit-Kokosmilch.html",
	},
	{
		"name": "Kartoffeln mit Quark",
		"persons": 1,
		"ingredients": [
			{ "amount": "250 g", "name": "Quark" },
			{ "amount": "90 g", "name": "Sahne" },
			{ "amount": "570 g", "name": "Kartoffeln" },
		],
		"steps": [
			"$2 waschen und kochen.",
			"$0 mit $1 mischen und mit Salz, Pfeffer und Paprikapulver würzen.",
		],
		"inspiration": "V",
	},
	{
		"name": "Joghurtbombe",
		"persons": [3, 4],
		"ingredients": [
			{ "amount": "500 g", "name": "Joghurt" },
			{ "amount": "120 g", "name": "Zucker" },
			{ "amount": "1 Pck", "name": "Vanillezucker" },
			{ "amount": "400 g", "name": "Sahne" },
		],
		"steps": [
			"$0, $1 und $2 in einer Schüssel vermischen.",
			"$3 steif schlagen und unterheben.",
			"Ein Sieb mit einem Geschirrtuch auslegen und auf eine größere Schüssel stellen.",
			"Die Masse in das Sieb gießen und über Nacht kalt stellen."
		],
		"inspiration": "https://www.chefkoch.de/rezepte/565591155022382/Joghurtbombe.html",
	},
	{
		"name": "Kartoffel-Karotten-Gulasch",
		"persons": 3,
		"ingredients": [
			{ "amount": "750 g", "name": "Kartoffeln" },
			{ "amount": "3", "name": "Karotten" },
			{ "amount": "3", "name": "Zwiebeln" },
			{ "amount": "1 EL", "name": "Olivenöl" },
			{ "amount": "500 ml", "name": "Brühe" },
			{ "amount": "3 TL", "name": "Paprikapulver" },
			{ "amount": "2 EL", "name": "Tomatenmark" },
			{ "amount": "3 EL", "name": "saure Sahne" },
		],
		"steps": [
			"$2 würfeln und mit $3 anbraten.",
			"$0 und $1 ca. 1 cm groß würfeln und kurz mit anbraten.",
			"Mit $4 ablöschen.",
			"$5 und $6 dazugeben und ca. 15 Minuten köcheln lassen.",
			"$7 dazugeben und mit Pfeffer und Salz würzen.",
		],
		"inspiration": "V",
	},
];

var g_SimpleStyle = true;
let g_SelectedRecipeId = (new URL(window.location.href)).searchParams.get("recipe");
// TODO: Better catch all invalid values
if (g_SelectedRecipeId == "")
	g_SelectedRecipeId = null;


function constructRow(amount, ingred, step)
{
	if (amount == "" && ingred == "" && step == "")
		return "";
	return "<tr><td>" + amount + "</td><td>" + ingred + "</td><td>" + step + "</td></tr>";
}

function capitalize(s)
{
	return s[0].toUpperCase() + s.substring(1);
}

function constructRecipe()
{
	let selectedRecipe = g_SelectedRecipeId != null && g_Recipes[g_SelectedRecipeId];
	// Go back to the overview in case this recipe does not exist.
	if (selectedRecipe === undefined)
		window.location.href = "index.html"

	let compSt = "";
	let simpSt = "";
	let includedIngredients = [];
	let s = 0;
	for (let step of selectedRecipe.steps)
	{
		compSt += constructRow("", "", "<b>" + ++s + ". ");
		simpSt += "<li>";
		let arr = step.split(/(\$[0-9]+)/gi).filter(s => s != "");
		let i = 0;

		let amountStr = "";
		let ingredStr = "";
		let stepStr = "";

		let newSentence = true;
		for (let part of arr)
		{
			if (part[0] == "$")
			{
				let ing = part.substring(1);
				let name = newSentence ? capitalize(selectedRecipe.ingredients[ing].name) : selectedRecipe.ingredients[ing].name;
				if (!includedIngredients.some(a => a == ing))
				{
					compSt += constructRow(amountStr, ingredStr, stepStr);
					includedIngredients.push(ing);
					stepStr = "";
					amountStr = selectedRecipe.ingredients[ing].amount;
					ingredStr = name;
				}
				else
					stepStr += name;
				simpSt += name;
			}
			else
			{
				stepStr += part;
				simpSt += part;
			}
			newSentence = part.slice(-2) == ". " || part.slice(-1) == ".";
		}
		compSt += constructRow(amountStr, ingredStr, stepStr);
		simpSt += "</li>";
	}
	if (selectedRecipe.ingredients.length !=includedIngredients.length) {
		console.warn("Seems like " + (selectedRecipe.ingredients.length - includedIngredients.length) + " ingredients have been forgotten.");
	}
	document.getElementById("heading").innerHTML = selectedRecipe.name;
	document.title = selectedRecipe.name;

	document.getElementById("ingredients").innerHTML = includedIngredients.map(i =>
		"<tr><td>" + selectedRecipe.ingredients[i].amount + "</td><td>" + selectedRecipe.ingredients[i].name + "</td></tr>"
	).join("");
	document.getElementById("steps").innerHTML = simpSt;

	document.getElementById("complexStyle").innerHTML = compSt;

	document.getElementById("complexStyle").style.display = g_SimpleStyle ? "none" : "inline";
	document.getElementById("steps").style.display = g_SimpleStyle ? "inline" : "none";
	document.getElementById("steps").style.listStyle = g_SimpleStyle ? "inside decimal" : "none";
	document.getElementById("ingredients").style.display = g_SimpleStyle ? "inline" : "none";
	let personsString = "Personen: ";
	if (selectedRecipe.persons == undefined)
		personsString += "undefined";
	else if (typeof selectedRecipe.persons == "object")
	{
		let rangeString = selectedRecipe.persons[0] + "–" + selectedRecipe.persons[1];
		if (selectedRecipe.persons[2] !== undefined)
			personsString = "Für " + rangeString + " " + selectedRecipe.persons[2];
		else
		personsString += rangeString;
	}
	else if (typeof selectedRecipe.persons == "string")
		personsString = "Für " + selectedRecipe.persons;
	else
		personsString += selectedRecipe.persons;
	document.getElementById("persons").innerHTML = personsString;
}

function populateRecipeList()
{
	document.title = "Rezepte";
	let list = g_Recipes.map((r,i) => [r,i]).sort((a,b) => a[0].name > b[0].name).map(p => {
		let url = new URL(window.location.href);
		url.searchParams.set("recipe", p[1]);
		return '<li><a class="recipe" href="' + url.href + '">' + p[0].name + "</a></li>"
	}).join("");
	document.getElementById("recipeList").innerHTML = list;
}

function toggleFormat()
{
	g_SimpleStyle = !g_SimpleStyle;
	constructRecipe();
}

function hideId(id, hide)
{
	document.getElementById(id).style.visibility = hide ? "hidden" : "visible";
}

function displayId(id, show)
{
	document.getElementById(id).style.display = show ? "block" : "none";
}

window.onload = function()
{
	displayId("recipePage", g_SelectedRecipeId != null);
	displayId("startPage", g_SelectedRecipeId == null);
	if (g_SelectedRecipeId != null)
	{
		constructRecipe();
		document.getElementById("toggleFormatButton").addEventListener ("click", toggleFormat, false);
	}
	else
		populateRecipeList();
}
